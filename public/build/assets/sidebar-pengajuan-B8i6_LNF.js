import{c as G,u as z,r as g,j as t,L as A,b as B}from"./app-BmjE4qHc.js";import{B as E}from"./button-CtRS0eYr.js";import{h as I,f as O,b as V,i as q,e as J}from"./sidebar-CF1TP3V7.js";import{b as $}from"./index-Bjtfn84y.js";import{AlertDestroyPengajuan as K}from"./alert-destroy-pengajuan-Dyk_2Nuy.js";import{B as h}from"./badge-DbuDkPUf.js";import{t as M}from"./index-CYBlxLl_.js";import{S as Q}from"./spinner-DYtEdZg-.js";import{D as U}from"./dialog-zeliSnxa.js";import{T as W}from"./trash-2-7NjV4gTV.js";import{P as X}from"./plus-BvO0qPOk.js";/* empty css            */import"./index-CNf3JV2e.js";import"./utils-Z01X30rl.js";import"./index-3XPLMKAL.js";import"./index-CP4RxH5M.js";import"./index-CHpzqecV.js";import"./index-CoEL1NMK.js";import"./index-B1jbRznW.js";import"./x-HMQ0LoDr.js";import"./createLucideIcon-BpTZnawq.js";import"./index-CmSV1ypQ.js";import"./index-DsnB32T4.js";import"./index-cU6byvkw.js";import"./index-DE4duBNV.js";import"./loader-circle-UngkA1dQ.js";function Pe(){const e=G.c(34),{tahun:a,daftarPengajuan:l,nomor:s,rincianPengajuan:n}=z().props,[i,D]=g.useState(l),[k,C]=g.useState(!1),[P,L]=g.useState(!1),[w,H]=g.useState(null);let j;e[0]===Symbol.for("react.memo_cache_sentinel")?(j=new Date().getFullYear(),e[0]=j):j=e[0];const R=j;let c;if(e[1]!==i||e[2]!==a){c=()=>{B.post($.pengajuan.new(),{tahun:a},{onStart:()=>{L(!0)},onSuccess:o=>{o.flash.status==="success"?(B.reload({only:["daftarPengajuan"]}),r(o.flash.data)):M.error(o.flash.message,{position:"bottom-center",style:{"--normal-bg":"var(--background)","--normal-text":"var(--destructive)","--normal-border":"var(--destructive)"}})},onFinish:()=>{L(!1)}})};const r=o=>{D([o,...i])};e[1]=i,e[2]=a,e[3]=c}else c=e[3];let b;e[4]!==i?(b=r=>{D(i.filter(o=>o.slug!==r))},e[4]=i,e[5]=b):b=e[5];const F=b;let v;e[6]===Symbol.for("react.memo_cache_sentinel")?(v=r=>{H(r),C(!0)},e[6]=v):v=e[6];const Y=v;let S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=r=>{C(r)},e[7]=S):S=e[7];const T=S;let _,N;e[8]!==l?(_=()=>(l&&D(l),Z),N=[l],e[8]=l,e[9]=_,e[10]=N):(_=e[9],N=e[10]),g.useEffect(_,N);let d;e[11]!==F||e[12]!==w?(d=t.jsx(K,{statePengajuan:w,destroyPengajuan:F,closeDialog:T}),e[11]=F,e[12]=w,e[13]=d):d=e[13];let m;e[14]!==k||e[15]!==d?(m=t.jsx(U,{open:k,onOpenChange:T,children:d}),e[14]=k,e[15]=d,e[16]=m):m=e[16];let u;e[17]!==P||e[18]!==c||e[19]!==a?(u=a===R&&t.jsx(I,{className:"gap-3.5 border-b p-4",children:t.jsxs(E,{variant:"outline",onClick:c,children:[P?t.jsx(Q,{}):t.jsx(X,{}),"Pengajuan"]})}),e[17]=P,e[18]=c,e[19]=a,e[20]=u):u=e[20];let f;e[21]!==s||e[22]!==n?.length||e[23]!==i||e[24]!==a?(f=i.length>0?i.map((r,o)=>t.jsxs("div",{className:`hover:bg-background ${r.slug===s&&"bg-background"} text-muted-foreground hover:text-foreground flex flex-col items-start gap-3 border-b px-4 py-2 text-sm leading-tight whitespace-nowrap`,children:[t.jsxs("div",{className:"flex w-full h-7 items-center text-xs text-muted-foreground",children:[t.jsx("span",{className:"flex items-center gap-1",children:r.send_at?"Terkirim":"Draft"}),s===r.slug?n?.length<1&&r.validated_at===null?t.jsx("span",{className:"ml-auto",children:t.jsx(E,{type:"button",variant:"outline",className:"h-7 w-7 text-red-500",size:"sm","aria-label":"Hapus",onClick:()=>Y({item:r,tahun:a}),children:t.jsx(W,{})})}):t.jsx("span",{className:"ml-auto",children:r.send_at}):t.jsx("span",{className:"ml-auto",children:r.send_at})]}),t.jsx(A,{href:$.pengajuan.rincian({tahun:a,nomor:r.slug}).url,preserveScroll:!0,className:`line-clamp-3 w-64 ${r.slug===s&&"text-indigo-500"} font-medium whitespace-break-spaces`,children:r.no_pengajuan}),t.jsx("div",{className:"flex w-full items-center gap-2",children:t.jsx(ee,{value:r})})]},o)):t.jsx("div",{className:"text-muted-foreground p-4 text-sm",children:"Tidak ada pengajuan."}),e[21]=s,e[22]=n?.length,e[23]=i,e[24]=a,e[25]=f):f=e[25];let x;e[26]!==f?(x=t.jsx(O,{children:t.jsx(V,{className:"px-0 pt-0",children:t.jsx(q,{children:f})})}),e[26]=f,e[27]=x):x=e[27];let p;e[28]!==x||e[29]!==u?(p=t.jsxs(J,{className:"hidden flex-1 md:flex min-w-80 sticky border-l lg:flex top-(--header-height) h-[calc(100svh-var(--header-height))]!",children:[u,x]}),e[28]=x,e[29]=u,e[30]=p):p=e[30];let y;return e[31]!==p||e[32]!==m?(y=t.jsxs(t.Fragment,{children:[m,p]}),e[31]=p,e[32]=m,e[33]=y):y=e[33],y}function Z(){}function ee(e){const a=G.c(11),{value:l}=e;switch(l.status){case"draft":{let s;return a[0]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsxs(t.Fragment,{children:[t.jsx("span",{children:t.jsx(h,{variant:"outline",children:"Draft"})}),t.jsx("span",{className:"ml-auto text-xs",children:"-"})]}),a[0]=s):s=a[0],s}case"validasi":{let s;a[1]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx("span",{children:t.jsx(h,{variant:"outline",className:"bg-amber-50 text-amber-700 dark:bg-amber-950 dark:text-amber-300",children:"Validasi"})}),a[1]=s):s=a[1];let n;return a[2]!==l.send_at?(n=t.jsxs(t.Fragment,{children:[s,t.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:l.send_at})]}),a[2]=l.send_at,a[3]=n):n=a[3],n}case"divalidasi":{let s;a[4]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx(h,{variant:"outline",className:"bg-blue-50 text-blue-700 dark:bg-blue-950 dark:text-blue-300",children:"Divalidasi"}),a[4]=s):s=a[4];let n;return a[5]!==l.validated_at?(n=t.jsxs(t.Fragment,{children:[s,t.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:l.validated_at})]}),a[5]=l.validated_at,a[6]=n):n=a[6],n}case"disetujui":{let s;a[7]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx(h,{variant:"outline",className:"bg-green-50 text-green-700 dark:bg-green-950 dark:text-green-300",children:"Disetujui"}),a[7]=s):s=a[7];let n;return a[8]!==l.approved_at?(n=t.jsxs(t.Fragment,{children:[s,t.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:l.approved_at})]}),a[8]=l.approved_at,a[9]=n):n=a[9],n}default:{let s;return a[10]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx(h,{variant:"outline",children:"Draft"}),a[10]=s):s=a[10],s}}}export{Pe as SidebarPengajuan};
