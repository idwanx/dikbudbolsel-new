import{c as de,r as X,j as t,b as te}from"./app-2dZOHQHS.js";import{u as pe,A as xe}from"./app-layout-DavPZANZ.js";import{L as fe}from"./layout-bos-XwgKse0t.js";import{b as M,e as r,c as _,a as he,d as ue,f as je,T as ge}from"./table-CG53ywLw.js";import be from"./main-pengajuan-C5nO0MaX.js";import{B as se}from"./button-sLxi5MKl.js";import{LabelStatusRincian as Ne}from"./label-status-rincian-DZ210j82.js";import{H as ke}from"./heading-BeOoVLRV.js";import{a as Se}from"./sidebar-CLtqQfIw.js";import{C as ae}from"./checkbox-C10859SG.js";import{b as re}from"./index-Bjtfn84y.js";import{t as le}from"./index-B1vyps4-.js";import{c as _e}from"./createLucideIcon-DtpxnDkb.js";import{C as ve}from"./check-CXyVIhbl.js";/* empty css            */import"./index-CYU-rGDi.js";import"./index-BoXPM41V.js";import"./index-DeNnTOfD.js";import"./index-BREDOwGZ.js";import"./utils-Z01X30rl.js";import"./dropdown-menu-CuLQyx2L.js";import"./index-LTGU2eql.js";import"./index-DKr3GQ2g.js";import"./index-DDDHIBdL.js";import"./index-GHaXFBl2.js";import"./navigation-menu-BvKNKsb-.js";import"./index-CavhLMQu.js";import"./index-C9WkWROl.js";import"./index-CNf3JV2e.js";import"./index-CleoUsKg.js";import"./index-DE4duBNV.js";import"./app-logo-icon-DpZOM0au.js";import"./search-Ce9wZWsj.js";import"./collapsible-Ct_mG9Vi.js";import"./notepad-text-Dmu72RxH.js";import"./chevron-right-CoXJ5uGj.js";import"./chevrons-up-down-CTwsHFNb.js";import"./app-sidebar-header-CelUfnE3.js";import"./breadcrumb-DX0MO9O3.js";import"./sidebar-sekolah--1gFhWpT.js";import"./sidebar-pengajuan-BkiCWyBQ.js";import"./alert-destroy-pengajuan-CO7ppn6o.js";import"./dialog-BzZOWdye.js";import"./x-DYp65Y98.js";import"./spinner-DnoGRQw3.js";import"./loader-circle-an6u7t3F.js";import"./trash-2-DCuX_12z.js";import"./badge-DqfNzj98.js";import"./plus-BLgTcSQx.js";const we=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ye=_e("chevron-left",we);function Ce(a){const e=de.c(61),{auth:Y,tahun:U,sekolah:Z,pengajuan:c,rincianPengajuan:i}=a,[l,ne]=X.useState(i);let v;e[0]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[0]=v):v=e[0];const[n,ee]=X.useState(v),{notification:m}=pe();Y.user.roleuser.slug==="admin"||Y.user.roleuser.slug;let w;e[1]!==l?(w=l?.reduce(Ie,0),e[1]=l,e[2]=w):w=e[2];const ie=w,oe=Le;let y;e[3]!==l?(y=s=>{ee(s?l.map(Te):[])},e[3]=l,e[4]=y):y=e[4];const q=y;let C;e[5]===Symbol.for("react.memo_cache_sentinel")?(C=s=>{ee(o=>o.includes(s)?o.filter(me=>me!==s):[...o,s])},e[5]=C):C=e[5];const ce=C;let R;e[6]!==m?.info||e[7]!==i||e[8]!==U?(R=()=>(m?.info==="pengajuan-batal"&&te.visit(re.pengajuan.index({tahun:U})),()=>{ne(i)}),e[6]=m?.info,e[7]=i,e[8]=U,e[9]=R):R=e[9];let T;e[10]!==m||e[11]!==i?(T=[i,m],e[10]=m,e[11]=i,e[12]=T):T=e[12],X.useEffect(R,T);let L;e[13]!==c.slug||e[14]!==n?(L=()=>{te.post(re.transaksi.validasi(c.slug).url,{data:n},{preserveScroll:!0,onSuccess:Re})},e[13]=c.slug,e[14]=n,e[15]=L):L=e[15];const G=L,J=`Rincian Pengajuan ${Z?Z?.nama_sekolah:""}`;let d;e[16]!==J?(d=t.jsx(ke,{title:J,description:"Kelola data pengajuan pada tabel dibawah ini."}),e[16]=J,e[17]=d):d=e[17];let I;e[18]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("div",{className:"ml-auto",children:t.jsx(se,{size:"icon-sm","aria-label":"Submit",variant:"outline",onClick:oe,children:t.jsx(ye,{})})}),e[18]=I):I=e[18];let p;e[19]!==d?(p=t.jsxs("div",{className:"flex",children:[d,I]}),e[19]=d,e[20]=p):p=e[20];let P;e[21]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(Se,{className:"mb-4"}),e[21]=P):P=e[21];let x;e[22]!==c.no_pengajuan?(x=t.jsx("div",{className:"flex py-2 items-center",children:t.jsxs("p",{className:"text-sm",children:["No."," ",c.no_pengajuan]})}),e[22]=c.no_pengajuan,e[23]=x):x=e[23];let A,B,E,H,D;e[24]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(_,{className:"w-3 text-center",children:"No"}),B=t.jsx(_,{children:"Uraian"}),E=t.jsx(_,{className:"w-50 2xl:w-60",children:"Penerima"}),H=t.jsx(_,{className:"w-20 2xl:w-40 text-right",children:"Nominal"}),D=t.jsx(_,{className:"w-20 2xl:w-30 text-center",children:"Status"}),e[24]=A,e[25]=B,e[26]=E,e[27]=H,e[28]=D):(A=e[24],B=e[25],E=e[26],H=e[27],D=e[28]);const O=n.length>0;let f;e[29]!==q?(f=s=>q(s),e[29]=q,e[30]=f):f=e[30];let h;e[31]!==O||e[32]!==f?(h=t.jsx(he,{children:t.jsxs(M,{children:[A,B,E,H,D,t.jsx(_,{className:"w-12 2xl:w-20 text-center",children:t.jsx(ae,{id:"validasi",checked:O,onCheckedChange:f,className:"mr-2"})})]})}),e[31]=O,e[32]=f,e[33]=h):h=e[33];let u;e[34]!==n||e[35]!==l?(u=l?.length>0?l.map((s,o)=>t.jsxs(M,{children:[t.jsx(r,{className:"text-center",children:o+1}),t.jsx(r,{className:"whitespace-normal",children:s.uraian}),t.jsxs(r,{className:"whitespace-normal",children:[t.jsx("p",{children:s.nama_penerima}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s.nama_bank}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s.no_rekening})]}),t.jsx(r,{className:"font-mono text-right",children:Number(s.nominal).toLocaleString("id-ID")}),t.jsx(r,{className:"text-center",children:t.jsx(Ne,{status:s.status})}),t.jsx(r,{className:"text-center",children:t.jsx(ae,{checked:n.includes(s.id),onCheckedChange:()=>ce(s.id),className:"mr-2"},o)})]},o)):t.jsx(M,{children:t.jsx(r,{colSpan:6,className:"text-muted-foreground",children:"Tidak ada rincian, Klik tombol (+ Rincian) untuk menambah rincian baru."})}),e[34]=n,e[35]=l,e[36]=u):u=e[36];let j;e[37]!==u?(j=t.jsx(ue,{children:u}),e[37]=u,e[38]=j):j=e[38];let F;e[39]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(r,{colSpan:3,className:"text-right",children:"Total"}),e[39]=F):F=e[39];const Q=Number(ie);let g;e[40]!==Q?(g=Q.toLocaleString("id-ID"),e[40]=Q,e[41]=g):g=e[41];let b;e[42]!==g?(b=t.jsx(r,{className:"font-mono text-right",children:g}),e[42]=g,e[43]=b):b=e[43];let K,V;e[44]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(r,{className:"text-center",children:"-"}),V=t.jsx(r,{className:"text-center",children:"-"}),e[44]=K,e[45]=V):(K=e[44],V=e[45]);let N;e[46]!==b?(N=t.jsx(je,{children:t.jsxs(M,{children:[F,b,K,V]})}),e[46]=b,e[47]=N):N=e[47];let k;e[48]!==h||e[49]!==j||e[50]!==N?(k=t.jsxs(ge,{children:[h,j,N]}),e[48]=h,e[49]=j,e[50]=N,e[51]=k):k=e[51];const W=n.length<1;let $;e[52]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(ve,{}),e[52]=$):$=e[52];let S;e[53]!==G||e[54]!==W?(S=t.jsx("div",{className:"flex flex-row-reverse pt-4",children:t.jsxs(se,{onClick:G,disabled:W,children:[$," Validasi"]})}),e[53]=G,e[54]=W,e[55]=S):S=e[55];let z;return e[56]!==p||e[57]!==x||e[58]!==k||e[59]!==S?(z=t.jsxs(t.Fragment,{children:[p,P,x,k,S]}),e[56]=p,e[57]=x,e[58]=k,e[59]=S,e[60]=z):z=e[60],z}function Re(a){a.flash.status==="success"?le.success(a.flash.message,{position:"bottom-center",style:{"--normal-bg":"var(--background)","--normal-text":"light-dark(var(--color-green-600), var(--color-green-400))","--normal-border":"light-dark(var(--color-green-600), var(--color-green-400))"}}):le.error(a.flash.message,{position:"bottom-center",style:{"--normal-bg":"var(--background)","--normal-text":"var(--destructive)","--normal-border":"var(--destructive)"}})}function Te(a){return a.id}function Le(){window.history.back()}function Ie(a,e){return a+e.nominal}Ce.layout=a=>t.jsx(xe,{children:t.jsx(fe,{children:t.jsx(be,{children:a})})});export{Ce as default};
